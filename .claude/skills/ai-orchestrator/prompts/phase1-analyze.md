# 阶段1：需求分析提示词模板

## 你的任务

请作为资深技术架构师，详细分析以下任务的技术需求：

**任务描述**：{从orchestrate.sh传入的$TASK参数}

## 分析维度

### 1. 功能分解
将任务拆解成具体的功能清单，每个功能要：
- 清晰描述功能目标
- 明确输入和输出
- 标注优先级（P0/P1/P2）

### 2. 技术栈选型
根据任务特点推荐最合适的技术栈：
- **编程语言**：选择理由
- **框架/库**：为什么选这个？
- **数据库**：SQL还是NoSQL？为什么？
- **第三方服务**：是否需要？

### 3. 文件结构设计
设计清晰的项目文件结构：
```
project/
├── src/
│   ├── [模块1]/
│   │   ├── [文件1]  # 用途说明
│   │   └── [文件2]  # 用途说明
│   └── [模块2]/
├── tests/
└── docs/
```

### 4. 关键实现要点
列出实现过程中的关键技术点：
- 核心算法或逻辑
- 数据流设计
- API接口设计
- 性能优化考虑
- 安全性考虑

### 5. 风险评估
识别潜在风险和挑战：
- 技术风险（复杂度、性能）
- 依赖风险（第三方库、服务）
- 安全风险（数据泄露、认证）
- 向后兼容性风险

## 输出格式

请严格按照以下JSON格式输出（便于后续阶段解析）：

```json
{
  "task_description": "任务描述（原文）",
  "analysis_date": "2025-12-04",
  "features": [
    {
      "name": "功能名称",
      "description": "功能详细描述",
      "priority": "P0",
      "input": "输入描述",
      "output": "输出描述"
    }
  ],
  "tech_stack": {
    "language": "编程语言",
    "language_reason": "选择理由",
    "framework": "框架名称",
    "framework_reason": "选择理由",
    "libraries": [
      {
        "name": "库名称",
        "purpose": "用途",
        "version": "推荐版本"
      }
    ],
    "database": {
      "type": "SQL/NoSQL",
      "engine": "具体数据库",
      "reason": "选择理由"
    }
  },
  "file_structure": {
    "root": "项目根目录名",
    "directories": [
      {
        "path": "目录路径",
        "purpose": "用途说明"
      }
    ],
    "files": [
      {
        "path": "文件路径",
        "purpose": "用途说明",
        "dependencies": ["依赖的其他文件"]
      }
    ]
  },
  "key_points": [
    {
      "category": "类别（如：核心算法、API设计）",
      "description": "详细说明",
      "code_example": "伪代码示例（可选）"
    }
  ],
  "risks": [
    {
      "type": "风险类型（技术/依赖/安全/兼容性）",
      "description": "风险描述",
      "severity": "严重程度（高/中/低）",
      "mitigation": "缓解措施"
    }
  ],
  "estimation": {
    "complexity": "复杂度评估（简单/中等/复杂）",
    "development_time": "预计开发时间",
    "testing_time": "预计测试时间"
  }
}
```

## 输出位置

将上述JSON保存到：`.ai-orchestrator/phase1_requirements.json`

## 注意事项

1. **实用主义优先**：选择成熟稳定的技术，避免过度设计
2. **向后兼容**：考虑现有系统的兼容性
3. **安全第一**：明确标注安全风险和防范措施
4. **可测试性**：设计时考虑如何编写单元测试
5. **文档清晰**：技术选型要有充分理由，不要只说"好用"

---

**这个阶段的输出将作为Codex代码生成的输入，请确保分析详尽、格式正确！**
